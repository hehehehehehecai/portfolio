---
import '../styles/global.css';

const projects = await Astro.glob('../content/projects/*.md');
const sortedProjects = projects.sort((a, b) => {
  const dateA = new Date(a.frontmatter.date);
  const dateB = new Date(b.frontmatter.date);
  return dateB.getTime() - dateA.getTime();
});

// ä»Žæ–‡ä»¶è·¯å¾„ä¸­æå– slug
const getSlugFromPath = (path) => {
  const match = path.match(/projects\/(.*)\.md$/);
  return match ? match[1] : '';
};
---

<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50' y='50' font-size='80' text-anchor='middle' dy='0.3em' font-family='Arial, sans-serif' fill='%23ffffff'%3EðŸ§ª%3C/text%3E%3C/svg%3E" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>ä½•æ™“å®‡ - Portfolio</title>
		<meta name="description" content="Chemistry Student @ Nankai Univ. | Indie Developer. Developing efficiency tools with code, exploring the world with chemistry." />
	</head>
	<body class="bg-neutral-950 text-white min-h-screen">
		<main class="container mx-auto px-4 py-8">
			<!-- Hero Section -->
			<section class="text-center mb-16 py-12">
				<h1 class="text-4xl font-bold mb-4">ä½•æ™“å®‡</h1>
				<h2 class="text-xl text-gray-300 mb-6">Chemistry Student @ Nankai Univ. | Indie Developer</h2>
				<p class="text-gray-400 max-w-2xl mx-auto">
					Developing efficiency tools with code, exploring the world with chemistry. Welcome to my digital garden.
				</p>
			</section>
			
			<div class="flex flex-nowrap overflow-x-auto scroll-smooth snap-x snap-mandatory gap-6 py-4 mb-8 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]">
				{Array.isArray(sortedProjects) && [...sortedProjects, ...sortedProjects, ...sortedProjects].map((project, index) => {
						return (
						<a 
					href={`/projects/${getSlugFromPath(project.file)}`} 
					class="block flex-shrink-0 w-80 snap-center"
				>
							<article class="bg-neutral-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 hover:scale-[1.02]">
								{project.frontmatter.image && (
									<img 
										src={project.frontmatter.image} 
										alt={project.frontmatter.title} 
										class="w-full aspect-video object-cover"
									/>
								)}
								<div class="p-6">
									<h2 class="text-xl font-semibold mb-2">{project.frontmatter.title}</h2>
									<p class="text-gray-300 mb-4 text-sm">{project.frontmatter.description}</p>
									<div class="flex flex-wrap gap-2 mb-4">
										{Array.isArray(project.frontmatter.tags) && project.frontmatter.tags.map((tag) => (
											<span class="px-3 py-1 bg-neutral-700 text-white text-xs font-medium rounded-full">
												{tag}
											</span>
										))}
									</div>
									<div class="flex items-center justify-between text-sm text-gray-400">
										<span>{new Date(project.frontmatter.date).toLocaleDateString()}</span>
										<span class="text-blue-400 hover:underline">æŸ¥çœ‹é¡¹ç›®</span>
									</div>
								</div>
							</article>
						</a>
					);
				})}
			</div>
		</main>
		<footer class="container mx-auto px-4 py-6 border-t border-neutral-800 mt-12">
			<div class="flex flex-col sm:flex-row justify-between items-center gap-4">
				<p class="text-gray-500 text-sm">Â© 2026 Built with Astro & Trae</p>
				<div class="flex gap-3">
					<a 
						href="https://github.com/hehehehehehecai" 
						target="_blank" 
						rel="noopener noreferrer"
						class="px-4 py-2 bg-neutral-800 text-white rounded-md hover:bg-neutral-700 transition-colors duration-300 font-medium"
					>
						GitHub
					</a>
					<a 
						href="mailto:614517030@qq.com" 
						class="px-4 py-2 bg-neutral-800 text-white rounded-md hover:bg-neutral-700 transition-colors duration-300 font-medium"
					>
						Email Me
					</a>
				</div>
			</div>
		</footer>
	</body>
</html>
